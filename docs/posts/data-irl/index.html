<!DOCTYPE html>
<html>

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>How to Create Data IRL Maps - Open Monster Vision</title>
<meta name="description" content="I used to live in Philadelphia 
I assure I commited neither. I got the dataset here.
The Code library(&amp;quot;ggplot2&amp;quot;) library(&amp;quot;ggmap&amp;quot;) #Get Philadelphia Crime Data, this takes a while philCrimeData &amp;lt;- read.csv(&amp;quot;~/Downloads/crime.csv&amp;quot;,stringsAsFactors = FALSE) # Get Philly Map, Zoom in slightly philCrimeMap &amp;lt;- get_map(location = &amp;quot;philadelphia&amp;quot;,maptype = &amp;quot;roadmap&amp;quot;, zoom = 12) #Create Map philCrimeMapGG &amp;lt;- ggmap(philCrimeMap) #Create My Address me &amp;lt;- data.frame( Lon = c(-75.112021), Lat = c(39.991058), Crime = &amp;quot;Me&amp;quot;, stringsAsFactors = FALSE ) #Data Needs to be arranged so that the legend prints properly #Create rapes table rapes &amp;lt;- philCrimeData[which( philCrimeData$Text_General_Code == &#39;Rape&#39; ),] rapes &amp;lt;- rapes[,c(&amp;quot;Lat&amp;quot;,&amp;quot;Lon&amp;quot;)] #Create Crime Col rapes$Crime &amp;lt;- &amp;quot;Rapes&amp;quot; #Create Murders Table murders &amp;lt;- philCrimeData[grep(pattern = &amp;quot;Homicide&amp;quot;,philCrimeData$Text_General_Code),] murders &amp;lt;- murders[,c(&amp;quot;Lat&amp;quot;,&amp;quot;Lon&amp;quot;)] #Create Crime Col murders$Crime &amp;lt;- &amp;quot;Homicides&amp;quot; #Bind Tables Crimes &amp;lt;- rbind(rapes, murders) #Add Dots pngf &amp;lt;- philCrimeMapGG &#43; #Make Crime dots, There&#39;s a lot So make them Transparent geom_point(show."/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://openmonstervision.github.io/blog/posts/data-irl/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="I used to live in Philadelphia 
I assure I commited neither. I got the dataset here.
The Code library(&amp;quot;ggplot2&amp;quot;) library(&amp;quot;ggmap&amp;quot;) #Get Philadelphia Crime Data, this takes a while philCrimeData &amp;lt;- read.csv(&amp;quot;~/Downloads/crime.csv&amp;quot;,stringsAsFactors = FALSE) # Get Philly Map, Zoom in slightly philCrimeMap &amp;lt;- get_map(location = &amp;quot;philadelphia&amp;quot;,maptype = &amp;quot;roadmap&amp;quot;, zoom = 12) #Create Map philCrimeMapGG &amp;lt;- ggmap(philCrimeMap) #Create My Address me &amp;lt;- data.frame( Lon = c(-75.112021), Lat = c(39.991058), Crime = &amp;quot;Me&amp;quot;, stringsAsFactors = FALSE ) #Data Needs to be arranged so that the legend prints properly #Create rapes table rapes &amp;lt;- philCrimeData[which( philCrimeData$Text_General_Code == &#39;Rape&#39; ),] rapes &amp;lt;- rapes[,c(&amp;quot;Lat&amp;quot;,&amp;quot;Lon&amp;quot;)] #Create Crime Col rapes$Crime &amp;lt;- &amp;quot;Rapes&amp;quot; #Create Murders Table murders &amp;lt;- philCrimeData[grep(pattern = &amp;quot;Homicide&amp;quot;,philCrimeData$Text_General_Code),] murders &amp;lt;- murders[,c(&amp;quot;Lat&amp;quot;,&amp;quot;Lon&amp;quot;)] #Create Crime Col murders$Crime &amp;lt;- &amp;quot;Homicides&amp;quot; #Bind Tables Crimes &amp;lt;- rbind(rapes, murders) #Add Dots pngf &amp;lt;- philCrimeMapGG &#43; #Make Crime dots, There&#39;s a lot So make them Transparent geom_point(show." />
<meta name="twitter:title" content="How to Create Data IRL Maps - Open Monster Vision" />
<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />


<meta property="og:type" content="article" />
<meta content="How to Create Data IRL Maps - Open Monster Vision" property="og:title">
<meta content="I used to live in Philadelphia 
I assure I commited neither. I got the dataset here.
The Code library(&amp;quot;ggplot2&amp;quot;) library(&amp;quot;ggmap&amp;quot;) #Get Philadelphia Crime Data, this takes a while philCrimeData &amp;lt;- read.csv(&amp;quot;~/Downloads/crime.csv&amp;quot;,stringsAsFactors = FALSE) # Get Philly Map, Zoom in slightly philCrimeMap &amp;lt;- get_map(location = &amp;quot;philadelphia&amp;quot;,maptype = &amp;quot;roadmap&amp;quot;, zoom = 12) #Create Map philCrimeMapGG &amp;lt;- ggmap(philCrimeMap) #Create My Address me &amp;lt;- data.frame( Lon = c(-75.112021), Lat = c(39.991058), Crime = &amp;quot;Me&amp;quot;, stringsAsFactors = FALSE ) #Data Needs to be arranged so that the legend prints properly #Create rapes table rapes &amp;lt;- philCrimeData[which( philCrimeData$Text_General_Code == &#39;Rape&#39; ),] rapes &amp;lt;- rapes[,c(&amp;quot;Lat&amp;quot;,&amp;quot;Lon&amp;quot;)] #Create Crime Col rapes$Crime &amp;lt;- &amp;quot;Rapes&amp;quot; #Create Murders Table murders &amp;lt;- philCrimeData[grep(pattern = &amp;quot;Homicide&amp;quot;,philCrimeData$Text_General_Code),] murders &amp;lt;- murders[,c(&amp;quot;Lat&amp;quot;,&amp;quot;Lon&amp;quot;)] #Create Crime Col murders$Crime &amp;lt;- &amp;quot;Homicides&amp;quot; #Bind Tables Crimes &amp;lt;- rbind(rapes, murders) #Add Dots pngf &amp;lt;- philCrimeMapGG &#43; #Make Crime dots, There&#39;s a lot So make them Transparent geom_point(show." property="og:description">
<meta property="og:url" content="https://openmonstervision.github.io/blog/posts/data-irl/" />
<meta property="og:site_name" content="Open Monster Vision" />

<meta property="article:published_time" content="2017-12-08 17:45:48 -0600 CST" />





<script type="application/ld+json">
{ 
    "@context": "http://schema.org", 
    "@type": "BlogPosting",
    "headline": "How to Create Data IRL Maps",
    "genre": "",  
    "url": "https:\/\/openmonstervision.github.io\/blog\/posts\/data-irl\/",
    "datePublished": "2017-12-08 17:45:48 -0600 CST",
    "description": "I used to live in Philadelphia \nI assure I commited neither. I got the dataset here.\nThe Code library(\x26quot;ggplot2\x26quot;) library(\x26quot;ggmap\x26quot;) #Get Philadelphia Crime Data, this takes a while philCrimeData \x26lt;- read.csv(\x26quot;~\/Downloads\/crime.csv\x26quot;,stringsAsFactors = FALSE) # Get Philly Map, Zoom in slightly philCrimeMap \x26lt;- get_map(location = \x26quot;philadelphia\x26quot;,maptype = \x26quot;roadmap\x26quot;, zoom = 12) #Create Map philCrimeMapGG \x26lt;- ggmap(philCrimeMap) #Create My Address me \x26lt;- data.frame( Lon = c(-75.112021), Lat = c(39.991058), Crime = \x26quot;Me\x26quot;, stringsAsFactors = FALSE ) #Data Needs to be arranged so that the legend prints properly #Create rapes table rapes \x26lt;- philCrimeData[which( philCrimeData$Text_General_Code == \x27Rape\x27 ),] rapes \x26lt;- rapes[,c(\x26quot;Lat\x26quot;,\x26quot;Lon\x26quot;)] #Create Crime Col rapes$Crime \x26lt;- \x26quot;Rapes\x26quot; #Create Murders Table murders \x26lt;- philCrimeData[grep(pattern = \x26quot;Homicide\x26quot;,philCrimeData$Text_General_Code),] murders \x26lt;- murders[,c(\x26quot;Lat\x26quot;,\x26quot;Lon\x26quot;)] #Create Crime Col murders$Crime \x26lt;- \x26quot;Homicides\x26quot; #Bind Tables Crimes \x26lt;- rbind(rapes, murders) #Add Dots pngf \x26lt;- philCrimeMapGG \x2b #Make Crime dots, There\x27s a lot So make them Transparent geom_point(show.",
    "author": {
        "@type": "Person",
        "name": ""
    }
 }
</script>




<link rel="stylesheet" href="https://openmonstervision.github.io/blog/sass/main.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>


  <body>

    <header class="site-header">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://openmonstervision.github.io/blog/">Open Monster Vision</a>
    </div>

    
    <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
        <li><a href="https://openmonstervision.github.io/blog/pages/about/">About</a></li>
        <li><a href="https://openmonstervision.github.io/blog/pages/contact/">Contact</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Download <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a target="_blank" href="https://github.com/bul-ikana/hugo-cards">Project</a></li>
            <li><a href="https://github.com/bul-ikana/hugo-cards.git">Download</a></li>
            <li role="separator" class="divider"></li>
            <li><a target="_blank" href="https://themes.gohugo.io/">More Themes</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
</header>


    <div class="container">
      <div class="wrapper">
        
<div class="row">
<div class="col-md-8">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

          <header class="post-header">
            <h1 class="post-title" itemprop="name headline">How to Create Data IRL Maps</h1>
            <p class="post-meta"><time datetime='2017-12-08T17:45:48-06:00' itemprop="datePublished">December 8, 2017</time></p>
                 
          </header>

          <div class="post-content" itemprop="articleBody">
            

<p><link rel="stylesheet" href="https://openmonstervision.github.io/prism.css" />
<script src="https://openmonstervision.github.io/prism.js" type="text/javascript"></script></p>

<h1 id="i-used-to-live-in-philadelphia">I used to live in Philadelphia</h1>

<p><a href="https://i.imgur.com/dRefCUE.png"> <img src="https://i.imgur.com/dRefCUE.png" alt="Philly Crime" title="Philly Crime" /></a></p>

<p>I assure I commited neither. I got the dataset <a href="https://www.kaggle.com/mchirico/philadelphiacrimedata" title="Kaggle Dataset of Philly Crime">here</a>.</p>

<h2 id="the-code">The Code</h2>

<pre><code class="language-r">library(&quot;ggplot2&quot;)
library(&quot;ggmap&quot;)



#Get Philadelphia Crime Data, this takes a while
philCrimeData &lt;- read.csv(&quot;~/Downloads/crime.csv&quot;,stringsAsFactors = FALSE)
# Get Philly Map, Zoom in slightly
philCrimeMap &lt;- get_map(location = &quot;philadelphia&quot;,maptype = &quot;roadmap&quot;, zoom = 12)
#Create Map
philCrimeMapGG &lt;- ggmap(philCrimeMap) 
#Create My Address
me &lt;- data.frame(
  Lon = c(-75.112021),
  Lat = c(39.991058),
  Crime = &quot;Me&quot;,
  stringsAsFactors = FALSE
)

#Data Needs to be arranged so that the legend prints properly
#Create rapes table
rapes &lt;- philCrimeData[which( philCrimeData$Text_General_Code == 'Rape' ),]
rapes &lt;- rapes[,c(&quot;Lat&quot;,&quot;Lon&quot;)]
#Create Crime Col
rapes$Crime &lt;- &quot;Rapes&quot;
#Create Murders Table
murders &lt;- philCrimeData[grep(pattern = &quot;Homicide&quot;,philCrimeData$Text_General_Code),]
murders &lt;- murders[,c(&quot;Lat&quot;,&quot;Lon&quot;)]
#Create Crime Col
murders$Crime &lt;- &quot;Homicides&quot;
#Bind Tables
Crimes &lt;- rbind(rapes, murders)
#Add Dots
pngf &lt;- philCrimeMapGG +
  #Make Crime dots, There's a lot So make them Transparent
  geom_point(show.legend = TRUE,data = Crimes, aes(x = Lon, y = Lat, color = Crime),size = 0.5, alpha = 0.2) +
  #Make An Outline for the Me dot, 1 unit bigger than the me dot, Don't want this to show up in the legend, Not Transparent
  geom_point(show.legend = NA,data = me, aes(x = Lon, y = Lat), color = &quot;black&quot;, size = 3) +
  #Make the Me dot, size 2 compared to our .5 dot Crime dots, Not Transparent
  geom_point(show.legend = TRUE,data = me, aes(x = Lon, y = Lat, color = Crime), size = 2)
#The Legend is created Automagically, By utilizing the Crimes and Me Tables data Structure
#The colors for Murders and Rapes are automagically assigned, Except the Me dot which is specified
#Add Labels
final &lt;- pngf +
  xlab(label = &quot;Longitude&quot;) +
  ylab(label = &quot;Latitude&quot;) +
  ggtitle(&quot;Philly&quot;,subtitle = &quot;Criminal Activity&quot;) +
  theme(plot.title = element_text(hjust = 0.5), plot.subtitle = element_text( hjust = 0.5))

#Save as PNG
png(filename = 'Philly.png', width=1000, height=625)
print(final)
dev.off()
</code></pre>

<p>The code is probably better highlighted on <a href="https://github.com/OpenMonsterVision/maps/blob/master/createMap.R" title="GitHub Link to createMap.R">GitHub</a>.</p>

<h1 id="i-currently-live-in-nashville">I currently live in Nashville</h1>

<p><a href="https://i.imgur.com/6k27QDB.png"><img src="https://i.imgur.com/6k27QDB.png" alt="Adult Business Map" title="Nashville Registered Adult Business" /></a></p>

<p>I&rsquo;ve never been to any of these. The dataset can be found <a href="https://data.nashville.gov/Licenses-Permits/Davidson-County-Locations-Sexually-Oriented-Permit/g97f-x87i">here</a>.</p>

<h2 id="getting-my-lat-and-long">Getting My Lat and Long</h2>

<p>First I got a google maps api key, and I saved it to &ldquo;~/.gmaps&rdquo;. Then I wrote this Script:</p>

<pre><code class="language-bash">#!/bin/bash - 
#===============================================================================
#
#          FILE: getGPS.sh
# 
#         USAGE: ./getGPS.sh 1600 Pennsylvania Ave NW, Washington, DC 20006
# 
#   DESCRIPTION: 
# 
#       OPTIONS: ---
#  REQUIREMENTS: gsed for Mac, if your on linux change gsed to sed
#          BUGS: ---
#         NOTES: One Shot, Get JSON for Lat and Lon for an address
#        AUTHOR: Bsdpunk, Dusty Carver
#  ORGANIZATION: 
#       CREATED: 12/08/2017 19:25
#      REVISION:  2
#===============================================================================

set -o nounset                              # Treat unset variables as an error
#Put Your API Key in ~/.gmaps
#Just Copy it, and Paste it into vim as the above file
KEY=$(cat ~/.gmaps)
ARGARR=&quot;$@&quot;

APPEND=''
for i in $ARGARR;
do
    APPEND=&quot;$APPEND$i+&quot;
done
#Remove Commas
APPEND=$(printf $APPEND | gsed 's/,//g')
#Get JSON, and reduce it
curl -sKL &quot;https://maps.googleapis.com/maps/api/geocode/json?address=$APPEND&amp;key$KEY&quot; | egrep 'lat|lng' | head -n2

</code></pre>

<h2 id="creating-the-map">Creating The Map</h2>

<p>Now It&rsquo;s just like the other one. Just as simple, and I tried to comment the hell out of my code.</p>

<pre><code class="language-r">library(&quot;ggplot2&quot;)
library(&quot;ggmap&quot;)

#Get Nashville Adult Data
nashAdultData &lt;- read.csv(&quot;~/data/adult2.csv&quot;,stringsAsFactors = FALSE)
# Get Nashville Map, zoom in 2 additional levels
nashAdultMap &lt;- get_map(location = &quot;nashville&quot;,maptype = &quot;roadmap&quot;, zoom = 12)
#Create Map
nashAdultMapGG &lt;- ggmap(nashAdultMap) 
#Create My Address
me &lt;- data.frame(
  Long = c(-86.74),
  Lat = c(36.22),
  AdultBusiness = &quot;Me&quot;,
  stringsAsFactors = FALSE
)
#Create Adult Frame
adultGPS &lt;- nashAdultData[,c(&quot;Lat&quot;,&quot;Long&quot;)]
#Add type
adultGPS$AdultBusiness &lt;- &quot;Adult Business&quot;
#Combine tables
AdultCommerce &lt;- rbind(me, adultGPS)
#Save Map, with additions to variables
final &lt;- nashAdultMapGG +
  #Add black dots for erryone, do not show in legend
  geom_point(show.legend = FALSE,data = AdultCommerce, aes(x = Long, y = Lat),size = 3, color = &quot;black&quot;) +
  #Create different Color dots based on type(AdultBusiness or Not), do show in legend
  geom_point(show.legend = TRUE,data = AdultCommerce, aes(x = Long, y = Lat, color = AdultBusiness),size = 2) +
  #Label X axis Longitude
  xlab(label = &quot;Longitude&quot;) +
  #Label Y axis Longitude
  ylab(label = &quot;Latitude&quot;) +
  #Add Title and Subtitle
  ggtitle(&quot;Registered Adult Businesses&quot;,subtitle = &quot;Nashville&quot;) +
  #Center Title and Subtitle
  theme(plot.title = element_text(hjust = 0.5), plot.subtitle = element_text( hjust = 0.5))

#Save as PNG
png(filename = 'Nashville.png', width=1000, height=800)
print(final)
dev.off()

</code></pre>

<h1 id="why-would-i-waste-my-time-doing-this">Why Would I waste my time doing this ?</h1>

<p>Cause <a href="https://www.reddit.com/r/data_irl/" title="Data IRL">/r/data_irl</a> is awesome.</p>

<h1 id="why-would-you-waste-your-time-doing-this">Why Would You Waste Your Time Doing This ?</h1>

<p>Cause maybe someone on <a href="https://www.reddit.com/r/data_irl/" title="Data IRL">/r/data_irl</a> will see this, and realize making shit in R is ridic easy. And we get more data, IRL.</p>

<h1 id="mind-blown">Mind Blown</h1>

<p>Guess what you didn&rsquo;t make a map, you just made a graph. That thing is just decimal numbers mapped out.</p>

<h1 id="who-am-i">Who am I</h1>

<p>I am <a href="http://twitter.com/bsdpunk">@bsdpunk</a>[@bsdpunk], and I reccomend buying this R book cause <a href="https://www.amazon.com/gp/product/1784393908/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;tag=bsdpblog-20&amp;camp=1789&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=1784393908&amp;linkId=8927b5137c562d2dd27d43f76c0fba3c" title="A fucking ad">machine learning</a> is awesome.</p>

          </div>

    </article>
    <div class="row">
        
    </div>
    
    <div class="row">
            <ul class="pager">
             
                    <li><a class="next" href="https://openmonstervision.github.io/blog/posts/grubby-little-hacker/">&laquo; Grubby Little Hacker</a></li>
              
              
                <li><a class="previous" href="https://openmonstervision.github.io/blog/posts/werner-hertzog-destroyed-me-at-linux-fu/">Werner Hertzog Destroyed Me at Linux Fu - Best Job Interview Ever &raquo;</a></li>
              
            </ul>
    </div>
</div>


<div class="col-md-4 mt20">
        <div class="post-img">
           
            <img width="600" src="https://openmonstervision.github.io/blog/images/gopher.png" alt="webjeda">
            
        </div>
            
        
        <div class="mt10 recent">
            <h2>Recent articles</h2>        
             <ul>
                

                      <li>
                      <p><a href="https://openmonstervision.github.io/blog/posts/turning-dungeons-and-dragons-monster-manual-pdf-into-json/">Turning the D and D Monster Manual into JSON</a><small>&nbsp;&nbsp;April 10, 2018</small></p>
                      </li>

                

                      <li>
                      <p><a href="https://openmonstervision.github.io/blog/posts/grubby-little-hacker/">Grubby Little Hacker</a><small>&nbsp;&nbsp;December 9, 2017</small></p>
                      </li>

                

                      <li>
                      <p><a href="https://openmonstervision.github.io/blog/posts/data-irl/">How to Create Data IRL Maps</a><small>&nbsp;&nbsp;December 8, 2017</small></p>
                      </li>

                
              </ul>
        </div>
        
        <br>

</div>

</div>




      </div>
    </div>

    <footer>
    <div class="container">
        <div class="row p20">
            

            <div class="col-md-4 text-center mt25" >
                
            </div>
            <div class="col-md-4 text-center mt25">
               
               
               
               
               
            </div>

        </div> 
    </div>
</footer>
    

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://openmonstervision.github.io/blog//js/bootstrap.min.js"></script>
  
  </body>

</html>