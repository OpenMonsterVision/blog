<!DOCTYPE html>
<html>

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Modding Stardew Valley using Visual Studio 2019 On MacOS - Open Monster Vision</title>
<meta name="description" content="The best modding information The greatest resource for modding is of course, the wiki. For me though it did have an outdated bit.
Setting up your project You&amp;rsquo;ll have to set your project up under Other .NET, And Library. The Wiki was outdated and didn&amp;rsquo;t have good screenshots for this.
xnb files You should get familiar with the various XNB files that make modding the game very easy. dialog schedule General NPC Data"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://openmonstervision.github.io/blog/posts/modding-stardew-valley-visual-studio-2019-on-macos/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="The best modding information The greatest resource for modding is of course, the wiki. For me though it did have an outdated bit.
Setting up your project You&amp;rsquo;ll have to set your project up under Other .NET, And Library. The Wiki was outdated and didn&amp;rsquo;t have good screenshots for this.
xnb files You should get familiar with the various XNB files that make modding the game very easy. dialog schedule General NPC Data" />
<meta name="twitter:title" content="Modding Stardew Valley using Visual Studio 2019 On MacOS - Open Monster Vision" />
<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />


<meta property="og:type" content="article" />
<meta content="Modding Stardew Valley using Visual Studio 2019 On MacOS - Open Monster Vision" property="og:title">
<meta content="The best modding information The greatest resource for modding is of course, the wiki. For me though it did have an outdated bit.
Setting up your project You&amp;rsquo;ll have to set your project up under Other .NET, And Library. The Wiki was outdated and didn&amp;rsquo;t have good screenshots for this.
xnb files You should get familiar with the various XNB files that make modding the game very easy. dialog schedule General NPC Data" property="og:description">
<meta property="og:url" content="https://openmonstervision.github.io/blog/posts/modding-stardew-valley-visual-studio-2019-on-macos/" />
<meta property="og:site_name" content="Open Monster Vision" />

<meta property="article:published_time" content="2019-10-20 17:45:48 -0600 -0600" />





<script type="application/ld+json">
{ 
    "@context": "http://schema.org", 
    "@type": "BlogPosting",
    "headline": "Modding Stardew Valley using Visual Studio 2019 On MacOS",
    "genre": "",  
    "url": "https:\/\/openmonstervision.github.io\/blog\/posts\/modding-stardew-valley-visual-studio-2019-on-macos\/",
    "datePublished": "2019-10-20 17:45:48 -0600 -0600",
    "description": "The best modding information The greatest resource for modding is of course, the wiki. For me though it did have an outdated bit.\nSetting up your project You\x26rsquo;ll have to set your project up under Other .NET, And Library. The Wiki was outdated and didn\x26rsquo;t have good screenshots for this.\nxnb files You should get familiar with the various XNB files that make modding the game very easy. dialog schedule General NPC Data",
    "author": {
        "@type": "Person",
        "name": ""
    }
 }
</script>




<link rel="stylesheet" href="https://openmonstervision.github.io/blog/sass/main.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>


  <body>

    <header class="site-header">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://openmonstervision.github.io/blog/">Open Monster Vision</a>
    </div>

    
    <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
        <li><a href="https://openmonstervision.github.io/blog/pages/about/">About</a></li>
        <li><a href="https://openmonstervision.github.io/blog/pages/contact/">Contact</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Download <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a target="_blank" href="https://github.com/bul-ikana/hugo-cards">Project</a></li>
            <li><a href="https://github.com/bul-ikana/hugo-cards.git">Download</a></li>
            <li role="separator" class="divider"></li>
            <li><a target="_blank" href="https://themes.gohugo.io/">More Themes</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
</header>


    <div class="container">
      <div class="wrapper">
        
<div class="row">
<div class="col-md-8">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

          <header class="post-header">
            <h1 class="post-title" itemprop="name headline">Modding Stardew Valley using Visual Studio 2019 On MacOS</h1>
            <p class="post-meta"><time datetime='2019-10-20T17:45:48-06:00' itemprop="datePublished">October 20, 2019</time></p>
                 
          </header>

          <div class="post-content" itemprop="articleBody">
            

<p><link rel="stylesheet" href="https://openmonstervision.github.io/css/prism.css" />
<script src="https://openmonstervision.github.io/js/prism.js" type="text/javascript"></script></p>

<h1 id="the-best-modding-information">The best modding information</h1>

<p>The greatest resource for modding is of course, the <a href="https://stardewvalleywiki.com/Modding:Player_Guide/Getting_Started">wiki</a>. For me though it did have an outdated bit.</p>

<h1 id="setting-up-your-project">Setting up your project</h1>

<p>You&rsquo;ll have to set your project up under Other .NET, And Library. The Wiki was outdated and didn&rsquo;t have good screenshots for this.</p>

<p><img src="https://openmonstervision.github.io/blog/images/one.png" alt=".NET" />
<img src="https://openmonstervision.github.io/blog/images/two.png" alt="Library" /></p>

<h1 id="xnb-files">xnb files</h1>

<p>You should get familiar with the various XNB files that make modding the game very easy.
<br />
<a href="https://stardewvalleywiki.com/Modding:Dialogue">dialog</a>
<br />
<a href="https://stardewvalleywiki.com/Modding:Schedule_data">schedule</a>
<br />
<a href="https://stardewvalleywiki.com/Modding:NPC_data">General NPC Data</a></p>

<h1 id="adding-a-new-character">Adding a new character</h1>

<p>I would only use a mod like this on new saves. I have had some issues, with removing the mod afterword, and then the savegame is no good. I think this can be remedied but have not looked into it.
Here is the ModEntry.cs file:</p>

<pre><code class="language-csharp">
using System;
using System.Collections.Generic;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using StardewModdingAPI;
using StardewModdingAPI.Events;
using StardewValley;


namespace Mary
{
    public class ModEntry : Mod, IAssetEditor, IAssetLoader
    {
        private IModHelper modHelper;
        public override void Entry(IModHelper helper)
        {
            modHelper = helper;

            helper.Events.GameLoop.GameLaunched += this.OnGameLaunched;
        }

        public bool CanEdit&lt;T&gt;(IAssetInfo asset)
        {
            // Prepering to edit files.
            if (asset.AssetNameEquals(&quot;Data/NPCDispositions&quot;))
                return true;

            if (asset.AssetNameEquals(&quot;Data/NPCGiftTastes&quot;))
                return true;

            if (asset.AssetNameEquals(&quot;Characters/Dialogue/rainy&quot;))
                return true;

            if(asset.AssetNameEquals(&quot;Characters/Dialogue/rainy&quot;))
                return true;

            return false;
        }

        public void Edit&lt;T&gt;(IAssetData asset)
        {
            // Editing existing game files.
            if (asset.AssetNameEquals(&quot;Data/NPCDispositions&quot;))
            {
                asset.AsDictionary&lt;string, string&gt;().Data[&quot;Mary&quot;] = &quot;adult/shy/outgoing/positive/female/datable/null/Town/fall 9//Tent 2 3/Mary&quot;;
            }

            if (asset.AssetNameEquals(&quot;Data/NPCGiftTastes&quot;))
            {
                IDictionary&lt;string, string&gt; NPCGiftTastes = asset.AsDictionary&lt;string, string&gt;().Data;
                NPCGiftTastes[&quot;Mary&quot;] = &quot;Now that is a lovely gift, @. It will really help me!/227 228 220 428 440&quot; +
                    &quot; 787 247/That's so nice of you, @!/724 725&quot; +
                    &quot; 726 303 350/Uh... I'm not sure what should I do with this./2 24 90 174 190 336&quot; +
                    &quot; 194/Why would you even give this to me?/149 205 281 404 420 422/Thank you.//&quot;;
            }

            if (asset.AssetNameEquals(&quot;Characters/Dialogue/rainy&quot;))
            {
                IDictionary&lt;string, string&gt; rainy = asset.AsDictionary&lt;string, string&gt;().Data;
                rainy[&quot;Mary&quot;] = &quot;I hate it when it rains.$s&quot;;
            }
        }

        public bool CanLoad&lt;T&gt;(IAssetInfo asset)
        {
            //Preparing to load the assets.
            if (asset.AssetNameEquals(&quot;Characters/Dialogue/Mary&quot;))
            {
                return true;
            }

            if (asset.AssetNameEquals(&quot;Characters/Mary&quot;))
            {
                return true;
            }

            if (asset.AssetNameEquals(&quot;Portraits/Mary&quot;))
            {
                return true;
            }


            if (asset.AssetNameEquals(&quot;Characters/schedules/Mary&quot;))
            {
                return true;
            }


            return false;
        }

        public T Load&lt;T&gt;(IAssetInfo asset)
        {
         

            if (asset.AssetNameEquals(&quot;Characters/Dialogue/Mary&quot;))
            {
                return Helper.Content.Load&lt;T&gt;(&quot;assets/Mary_dialogue.xnb&quot;, ContentSource.ModFolder);
            }

            if (asset.AssetNameEquals(&quot;Characters/schedules/Mary&quot;))
            {
                return Helper.Content.Load&lt;T&gt;(&quot;assets/Mary_schedule.xnb&quot;, ContentSource.ModFolder);
            }

            if (asset.AssetNameEquals(&quot;Characters/Mary&quot;))
            {
                return Helper.Content.Load&lt;T&gt;(&quot;assets/texture.png&quot;, ContentSource.ModFolder);
            }

            if (asset.AssetNameEquals(&quot;Portraits/Mary&quot;))
            {
                return Helper.Content.Load&lt;T&gt;(&quot;assets/portrait.png&quot;, ContentSource.ModFolder);
            }


            throw new InvalidOperationException($&quot;Unexpected asset '{asset.AssetName}'.&quot;);
        }




        private void OnGameLaunched(object sender, GameLaunchedEventArgs e)
        {


            Monitor.Log($&quot;Mary Mod Loading&quot;);

        }


    }
}
</code></pre>

<p>As you can see in the code I did have to create a schedule file and a dialogue file, which I created by unpacking a different characters xnbfiles, using <a href="https://github.com/LeonBlade/xnbcli">xnbcli</a>. The xnbfiles of varying types can be found where ever your steam library is: SteamLibrary/steamapps/common/Stardew Valley/Contents/Resources/Content/. It&rsquo;s very easy to add filesm as you can see in the Load function. Sometimes your files won&rsquo;t load for various reasons, it&rsquo;s going to be a little trial and error, I had some issues with the schedule ones. Just keep fiddling.</p>

<h2 id="currently-unemployed">Currently Unemployed</h2>

<p>As I am currently unemployed perhaps you would want to click my amazon affiliate link and buy a <a href="https://www.amazon.com/gp/product/0134659864/ref=as_li_qf_asin_il_tl?ie=UTF8&amp;tag=bsdpblog-20&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=0134659864&amp;linkId=7ab0cb6cfa0116eee2d1f1c12caddab9">C# Book on Game Programming</a></p>

          </div>

    </article>
    <div class="row">
        
    </div>
    
    <div class="row">
            <ul class="pager">
             
              
                <li><a class="previous" href="https://openmonstervision.github.io/blog/posts/turning-dungeons-and-dragons-monster-manual-pdf-into-json/">Turning the D and D Monster Manual into JSON &raquo;</a></li>
              
            </ul>
    </div>
</div>


<div class="col-md-4 mt20">
        <div class="post-img">
           
            <img width="600" src="https://openmonstervision.github.io/blog/images/gopher.png" alt="webjeda">
            
        </div>
            
        
        <div class="mt10 recent">
            <h2>Recent articles</h2>        
             <ul>
                

                      <li>
                      <p><a href="https://openmonstervision.github.io/blog/posts/modding-stardew-valley-visual-studio-2019-on-macos/">Modding Stardew Valley using Visual Studio 2019 On MacOS</a><small>&nbsp;&nbsp;October 20, 2019</small></p>
                      </li>

                

                      <li>
                      <p><a href="https://openmonstervision.github.io/blog/posts/turning-dungeons-and-dragons-monster-manual-pdf-into-json/">Turning the D and D Monster Manual into JSON</a><small>&nbsp;&nbsp;April 10, 2018</small></p>
                      </li>

                

                      <li>
                      <p><a href="https://openmonstervision.github.io/blog/posts/grubby-little-hacker/">Grubby Little Hacker</a><small>&nbsp;&nbsp;December 9, 2017</small></p>
                      </li>

                
              </ul>
        </div>
        
        <br>

</div>

</div>




      </div>
    </div>

    <footer>
    <div class="container">
        <div class="row p20">
            

            <div class="col-md-4 text-center mt25" >
                
            </div>
            <div class="col-md-4 text-center mt25">
               
               
               
               
               
            </div>

        </div> 
    </div>
</footer>
    

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://openmonstervision.github.io/blog//js/bootstrap.min.js"></script>
  
  </body>

</html>